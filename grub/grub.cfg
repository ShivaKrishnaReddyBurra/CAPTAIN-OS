set timeout=5
set default=0

# Load required modules
insmod multiboot2
insmod part_msdos
insmod biosdisk

# Load video modules
insmod vbe
insmod vga
insmod video_bochs
insmod video_cirrus
insmod all_video

# Load graphics terminal
insmod gfxterm

# Try to set graphics mode
set gfxmode=1024x768x32,800x600x32,640x480x32,auto
terminal_output gfxterm

menuentry "CAPTAIN-OS (Auto Graphics)" {
    echo "Loading CAPTAIN-OS with auto graphics detection..."
    set gfxpayload=keep
    multiboot2 /boot/captainos.bin
    boot
}

menuentry "CAPTAIN-OS (1024x768x32)" {
    echo "Loading CAPTAIN-OS with 1024x768x32..."
    set gfxpayload=1024x768x32
    multiboot2 /boot/captainos.bin
    boot
}

menuentry "CAPTAIN-OS (800x600x32)" {
    echo "Loading CAPTAIN-OS with 800x600x32..."
    set gfxpayload=800x600x32
    multiboot2 /boot/captainos.bin
    boot
}

menuentry "CAPTAIN-OS (640x480x32)" {
    echo "Loading CAPTAIN-OS with 640x480x32..."
    set gfxpayload=640x480x32
    multiboot2 /boot/captainos.bin
    boot
}

menuentry "CAPTAIN-OS (Text Mode Only)" {
    echo "Loading CAPTAIN-OS in text mode only..."
    set gfxpayload=text
    multiboot2 /boot/captainos.bin
    boot
}