set timeout=0
set default=0

# Load required modules first
insmod multiboot2
insmod part_msdos
insmod biosdisk

# Load video modules
insmod vbe
insmod vga
insmod video_bochs
insmod video_cirrus
insmod all_video

# Load graphics terminal
insmod gfxterm
insmod font

# Set graphics mode - try multiple resolutions
set gfxmode=1024x768x32,800x600x32,640x480x32,auto

# Load font and set up graphics terminal
if loadfont ${prefix}/fonts/unicode.pf2; then
    terminal_output gfxterm
    set gfxpayload=keep
else
    # If no font available, still try to set graphics mode
    terminal_output gfxterm
    set gfxpayload=keep
fi

menuentry "CAPTAIN-OS" {
    set gfxpayload=keep
    multiboot2 /boot/captainos.bin
    boot
}

menuentry "CAPTAIN-OS (Safe Graphics)" {
    set gfxpayload=1024x768x32
    multiboot2 /boot/captainos.bin
    boot
}

menuentry "CAPTAIN-OS (Text Mode Fallback)" {
    set gfxpayload=text
    multiboot2 /boot/captainos.bin
    boot
}